services:
  - type: web
    name: clinic-backend
    env: docker
    plan: free
    rootDir: WebApp/Backend/ElysiaJS
    dockerfilePath: WebApp/Backend/ElysiaJS/Dockerfile
    autoDeploy: true
    healthCheckPath: /api/health
    envVars:
      - key: PORT
        value: 8080
      - key: PRISMA_PROVIDER
        value: postgresql
      - key: DATABASE_URL
        sync: false
      - key: AUTH_SECRET
        generateValue: true
      - key: COOKIE_NAME
        value: clinic_sess
      - key: COOKIE_SECURE
        value: "true"
      - key: CORS_ORIGIN
        # Comma-separated list of allowed origins (Cloudflare Pages + custom domain)
        value: https://your-pages-subdomain.pages.dev,https://your-domain.tld