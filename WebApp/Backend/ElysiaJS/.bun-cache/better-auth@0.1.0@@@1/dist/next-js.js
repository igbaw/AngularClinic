var o=(e,t,r)=>new Promise((i,n)=>{var d=s=>{try{u(r.next(s))}catch(c){n(c)}},a=s=>{try{u(r.throw(s))}catch(c){n(c)}},u=s=>s.done?i(s.value):Promise.resolve(s.value).then(d,a);u((r=r.apply(e,t)).next())});import{betterFetch as l}from"@better-fetch/fetch";import{NextResponse as h}from"next/server";function U(e){let t=r=>o(this,null,function*(){return"handler"in e?e.handler(r):e(r)});return{GET:t,POST:t}}function b(e){return t=>o(this,null,function*(){let r=new URL(t.url).origin,i=(e==null?void 0:e.baePath)||"/api/auth",n=`${r}${i}/session`,a=(yield l(n,{headers:t.headers})).data||null;return e.customRedirect?e.customRedirect(a,t):a?h.next():h.redirect(new URL(e.redirectTo||"/",r))})}export{b as authMiddleware,U as toNextJsHandler};
